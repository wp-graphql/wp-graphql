---
title: "ci: optimize CI matrix with minimal/full modes"
pr: 3465
author: "jasonbahl"
type: "ci"
breaking: false
---

## What maintenance tasks does this perform?

Resolves #3464

This PR optimizes the CI test matrix to reduce job count while maintaining test confidence using a "boundary testing" approach.

## Maintenance Changes

### Type of Changes
- [x] CI/CD pipeline improvements

### Files Modified
- \`.github/workflows/testing-integration.yml\` - Restructured matrix with dual modes

## Matrix Modes

### MINIMAL (~8 jobs) - For regular PRs to develop
| WP | PHP | Theme | Multisite | Coverage | Purpose |
|----|-----|-------|-----------|----------|---------|
| 6.9 | 8.4 | twentytwentyfive | ‚ùå | ‚úÖ | Latest |
| 6.9 | 8.4 | twentytwentyfive | ‚úÖ | ‚úÖ | + multisite |
| 6.9 | 8.4 | twentytwentyone | ‚ùå | ‚úÖ | + classic theme |
| 6.9 | 8.4 | twentytwentyone | ‚úÖ | ‚úÖ | + classic + multisite |
| 6.8 | 8.3 | twentytwentyfive | ‚ùå | ‚ùå | Current stable |
| 6.5 | 8.1 | twentytwentyone | ‚ùå | ‚ùå | Mid-range |
| 6.1 | 7.4 | twentytwentyone | ‚ùå | ‚ùå | Oldest supported |
| trunk | 8.4 | twentytwentyfive | ‚ùå | ‚ùå | üß™ Nightly (can fail) |

### FULL (~18 jobs) - For merges and release PRs
All of the above, plus:
- All supported PHP versions (7.4, 8.0, 8.1, 8.2, 8.3, 8.4) on latest stable WP
- All supported WP versions (6.1-6.8) with representative PHP versions

## Development Workflow Improvements

### What improvements does this provide?
- [x] Faster CI/CD pipeline
- [x] Better code quality checks (WordPress trunk testing)

### Developer Experience
- **5x faster PR feedback**: ~8 jobs instead of ~40 for regular PRs
- **Thorough pre-release testing**: Full matrix runs on merges and release PRs
- **Early warning**: WordPress trunk testing catches upcoming breaking changes

## Documentation
Added comprehensive comments to the workflow explaining:
- The boundary testing strategy
- When each matrix mode runs
- When to update versions
- Links to WP/PHP version resources for maintenance

## Impact Assessment

### What is the impact of these changes?
- [x] No impact on WPGraphQL functionality
- [x] Improved development workflow
- [x] Faster build times

### Breaking Changes
- [x] No breaking changes

## Questions for Discussion
1. Is the minimal matrix sufficient for regular PRs?
2. Should we add more combinations to the full matrix?
3. Any concerns about the boundary testing approach?
